# Baleno 會員忠誠度 App - 軟件需求規格說明書

**Software Requirements Specification (SRS)**

| 項目 | 內容 |
|------|------|
| 文件版本 | 1.0 |
| 建立日期 | 2025-12-05 |
| 最後更新 | 2025-12-05 |
| 專案名稱 | Baleno Membership Loyalty App |
| 平台 | iOS / Android (React Native + Expo) |

---

## 1. 專案概述

### 1.1 專案背景

Baleno 是一家知名服裝零售商，希望透過會員忠誠度 App 加強與顧客的互動，提供便捷的積分累積與優惠券兌換服務，提升顧客回購率和品牌忠誠度。

### 1.2 專案目標

- 提供會員一站式的積分管理平台
- 簡化店內結帳積分累積流程（透過會員 QR Code）
- 增加優惠券兌換的便利性
- 支援多語言以服務不同地區用戶
- 透過推送通知傳遞最新優惠資訊

### 1.3 目標用戶

| 用戶類型 | 描述 |
|----------|------|
| 主要用戶 | Baleno 會員顧客（年齡 18-55 歲） |
| 地區 | 香港、中國大陸、其他亞洲地區 |
| 設備 | iOS 和 Android 智能手機用戶 |

### 1.4 系統範圍

本 App 為客戶端應用程式，需與後端 REST API 整合以取得會員資料、積分和優惠券資訊。

**包含範圍：**
- 用戶認證（登入、註冊、登出）
- 會員資料顯示
- 積分餘額與交易記錄查詢
- 優惠券瀏覽與兌換
- 會員 QR Code 生成與展示
- 多語言界面（繁體中文、簡體中文、英文）
- 推送通知接收

**不包含範圍：**
- 後端 API 伺服器開發
- 會員等級制度
- 線上商店購物功能
- 支付功能

---

## 2. 功能需求

### 2.1 用戶認證模組 (FR-AUTH)

#### FR-AUTH-001: 會員登入

| 項目 | 描述 |
|------|------|
| 功能描述 | 會員使用用戶名和密碼登入系統 |
| 輸入 | 用戶名（必填）、密碼（必填） |
| 處理邏輯 | 1. 驗證輸入欄位非空<br>2. 呼叫後端 API 驗證憑證<br>3. 成功則儲存 JWT Token 並導航至主頁<br>4. 失敗則顯示錯誤訊息 |
| 輸出 | 登入成功：導航至主頁<br>登入失敗：顯示錯誤提示 |
| 安全性 | Token 使用 expo-secure-store 安全儲存 |

#### FR-AUTH-002: 會員註冊

| 項目 | 描述 |
|------|------|
| 功能描述 | 新用戶註冊成為 Baleno 會員 |
| 輸入 | 姓名（必填）、電郵（必填）、手機號碼（必填）、密碼（必填）、確認密碼（必填） |
| 驗證規則 | - 電郵格式驗證<br>- 手機號碼格式驗證<br>- 密碼最少 6 位<br>- 密碼與確認密碼須一致 |
| 處理邏輯 | 1. 前端驗證輸入格式<br>2. 呼叫後端 API 建立帳戶<br>3. 成功則自動登入並導航至主頁 |
| 輸出 | 註冊成功：自動登入<br>註冊失敗：顯示錯誤原因 |

#### FR-AUTH-003: 會員登出

| 項目 | 描述 |
|------|------|
| 功能描述 | 會員登出系統 |
| 處理邏輯 | 1. 清除本地儲存的 Token<br>2. 清除會員狀態<br>3. 導航至主頁（訪客模式） |
| 輸出 | 返回訪客模式主頁 |

#### FR-AUTH-004: Demo 帳戶登入

| 項目 | 描述 |
|------|------|
| 功能描述 | 提供測試用 Demo 帳戶 |
| Demo 憑證 | 用戶名：`demo`<br>密碼：`demo` |
| 處理邏輯 | 使用 Demo 帳戶登入時，系統返回預設的模擬會員資料 |
| 用途 | 開發測試、功能展示 |

#### FR-AUTH-005: 訪客瀏覽模式

| 項目 | 描述 |
|------|------|
| 功能描述 | 未登入用戶可瀏覽主頁 |
| 可用功能 | 查看主頁歡迎畫面、會員權益介紹 |
| 限制 | 積分、優惠券、設定頁面需登入後才可存取 |

---

### 2.2 會員主頁模組 (FR-HOME)

#### FR-HOME-001: 會員歡迎頁面（訪客）

| 項目 | 描述 |
|------|------|
| 功能描述 | 未登入用戶看到的主頁 |
| 顯示內容 | - Baleno Logo<br>- 歡迎訊息<br>- 會員權益說明（賺取積分、兌換優惠券、接收優惠）<br>- 登入/註冊按鈕 |
| 互動 | 點擊登入/註冊按鈕跳轉至登入頁 |

#### FR-HOME-002: 會員主頁（已登入）

| 項目 | 描述 |
|------|------|
| 功能描述 | 已登入會員的主頁 |
| 顯示內容 | - Baleno Logo<br>- 歡迎訊息（含會員姓名）<br>- 會員 QR Code 按鈕<br>- 目前積分餘額<br>- 即將到期積分（如有）<br>- 快速操作按鈕 |
| 資料來源 | 會員資料 API、積分餘額 API |
| 下拉刷新 | 支援下拉刷新更新資料 |

#### FR-HOME-003: 會員 QR Code

| 項目 | 描述 |
|------|------|
| 功能描述 | 生成並展示會員專屬 QR Code |
| 觸發方式 | 點擊主頁的「會員 QR Code」按鈕 |
| 顯示內容 | - 底部滑出式彈窗<br>- QR Code（編碼會員 ID）<br>- 會員姓名<br>- 會員編號<br>- 使用說明 |
| QR Code 內容 | 格式：`BALENO_MEMBER:{會員ID}` |
| 用途 | 店內結帳時出示給職員掃描以累積積分 |

#### FR-HOME-004: 快速操作

| 項目 | 描述 |
|------|------|
| 功能描述 | 提供快速導航至常用功能 |
| 按鈕 | - 查看記錄（跳轉積分頁面）<br>- 查看優惠券（跳轉優惠券頁面） |

---

### 2.3 積分系統模組 (FR-POINTS)

#### FR-POINTS-001: 積分餘額查詢

| 項目 | 描述 |
|------|------|
| 功能描述 | 顯示會員目前積分餘額 |
| 顯示內容 | - 目前積分數值<br>- 即將到期積分數量及日期（如有） |
| 資料來源 | `GET /members/me/points` API |
| 更新方式 | 頁面載入時自動取得、支援下拉刷新 |

#### FR-POINTS-002: 交易記錄查詢

| 項目 | 描述 |
|------|------|
| 功能描述 | 顯示積分交易歷史記錄 |
| 顯示內容 | 每筆交易包含：<br>- 交易類型圖標<br>- 交易描述<br>- 交易日期<br>- 店舖位置（如適用）<br>- 積分變動數量（正/負） |
| 交易類型 | - 賺取（綠色 +）<br>- 兌換（橙色 -）<br>- 過期（紅色 -）<br>- 調整（灰色 +/-） |
| 分頁 | 支援滾動加載更多 |
| 資料來源 | `GET /members/me/transactions` API |

---

### 2.4 優惠券系統模組 (FR-COUPON)

#### FR-COUPON-001: 可用優惠券列表

| 項目 | 描述 |
|------|------|
| 功能描述 | 顯示會員可兌換的優惠券列表 |
| 顯示內容 | 每張優惠券包含：<br>- 優惠券標題<br>- 優惠描述<br>- 所需積分<br>- 有效期限 |
| 頁籤切換 | 可切換「可用」和「已兌換」列表 |
| 資料來源 | `GET /members/me/coupons/available` API |

#### FR-COUPON-002: 優惠券兌換

| 項目 | 描述 |
|------|------|
| 功能描述 | 使用積分兌換優惠券 |
| 前置條件 | 會員積分餘額 >= 優惠券所需積分 |
| 處理邏輯 | 1. 點擊兌換按鈕<br>2. 顯示確認對話框<br>3. 呼叫兌換 API<br>4. 成功則顯示兌換碼/QR Code<br>5. 更新積分餘額和優惠券列表 |
| API | `POST /coupons/:id/redeem` |

#### FR-COUPON-003: 已兌換優惠券查看

| 項目 | 描述 |
|------|------|
| 功能描述 | 查看已兌換的優惠券及其兌換碼 |
| 顯示內容 | - 優惠券資訊<br>- 兌換碼（文字）<br>- 兌換碼 QR Code<br>- 兌換日期<br>- 使用期限 |
| 資料來源 | `GET /members/me/coupons/redeemed` API |

---

### 2.5 設定頁面模組 (FR-SETTINGS)

#### FR-SETTINGS-001: 個人資料顯示

| 項目 | 描述 |
|------|------|
| 功能描述 | 顯示會員個人資料 |
| 顯示內容 | - 會員姓名<br>- 電子郵件<br>- 手機號碼<br>- 會員加入日期 |
| 隱私考量 | 敏感資料（電郵、電話）僅在設定頁面顯示 |

#### FR-SETTINGS-002: 語言切換

| 項目 | 描述 |
|------|------|
| 功能描述 | 切換 App 顯示語言 |
| 可選語言 | - 繁體中文（zh-HK）- 預設<br>- 簡體中文（zh-CN）<br>- English（en） |
| 處理邏輯 | 1. 選擇語言後立即更新界面<br>2. 儲存偏好至 AsyncStorage<br>3. 下次啟動 App 時自動套用 |

#### FR-SETTINGS-003: 推送通知設定

| 項目 | 描述 |
|------|------|
| 功能描述 | 管理推送通知權限 |
| 顯示內容 | 顯示目前通知開關狀態 |
| 處理邏輯 | 點擊後導航至系統設定頁面 |

#### FR-SETTINGS-004: 登出功能

| 項目 | 描述 |
|------|------|
| 功能描述 | 從設定頁面登出 |
| 互動 | 點擊登出按鈕，確認後執行登出 |

---

## 3. 非功能需求

### 3.1 多語言支援 (NFR-L10N)

| 項目 | 要求 |
|------|------|
| 支援語言 | 繁體中文（預設）、簡體中文、英文 |
| 預設語言 | 首次啟動時根據設備語言自動選擇，無匹配則使用繁體中文 |
| 切換機制 | 運行時可即時切換，無需重啟 App |
| 儲存 | 語言偏好儲存於 AsyncStorage |

### 3.2 安全性要求 (NFR-SEC)

| 項目 | 要求 |
|------|------|
| Token 儲存 | 使用 expo-secure-store 加密儲存 |
| 網路傳輸 | 所有 API 呼叫使用 HTTPS |
| 敏感資料 | 不在日誌中記錄密碼或 Token |
| 會話管理 | Token 過期後自動登出並提示重新登入 |

### 3.3 性能要求 (NFR-PERF)

| 項目 | 要求 |
|------|------|
| 首屏載入 | 啟動後 3 秒內顯示主要內容 |
| API 回應 | 顯示載入指示器，超時處理設為 30 秒 |
| 列表滾動 | 流暢的 60fps 滾動體驗 |
| 圖片載入 | 使用適當的圖片壓縮和快取 |

### 3.4 可用性要求 (NFR-UX)

| 項目 | 要求 |
|------|------|
| 下拉刷新 | 所有資料頁面支援下拉刷新 |
| 錯誤提示 | 網路錯誤、操作失敗時顯示友好提示 |
| 載入狀態 | 資料載入時顯示載入動畫 |
| 空狀態 | 無資料時顯示適當的空狀態提示 |

### 3.5 相容性要求 (NFR-COMPAT)

| 項目 | 要求 |
|------|------|
| iOS | iOS 13.0 或以上 |
| Android | Android 6.0 (API 23) 或以上 |
| 螢幕尺寸 | 支援 4.7 吋至 6.7 吋螢幕 |
| 方向 | 僅支援直向模式 |

---

## 4. 用戶故事與驗收標準

### US-001: 會員登入

**用戶故事：**
> 作為 Baleno 會員，我希望能使用我的帳戶登入 App，以便查看我的積分和優惠券。

**驗收標準：**
- [ ] 登入頁面顯示用戶名和密碼輸入欄位
- [ ] 輸入正確憑證後成功登入並跳轉至主頁
- [ ] 輸入錯誤憑證時顯示錯誤訊息
- [ ] 登入狀態在 App 重啟後保持

---

### US-002: 訪客瀏覽

**用戶故事：**
> 作為潛在會員，我希望能在未登入時瀏覽 App 主頁，了解會員權益後再決定是否註冊。

**驗收標準：**
- [ ] 未登入時可看到主頁歡迎畫面
- [ ] 顯示會員權益介紹
- [ ] 點擊「登入/註冊」按鈕可跳轉至登入頁
- [ ] 嘗試存取受保護頁面時自動導向主頁

---

### US-003: 查看積分

**用戶故事：**
> 作為 Baleno 會員，我希望能查看我的積分餘額和交易記錄，以了解我的積分狀況。

**驗收標準：**
- [ ] 主頁顯示目前積分餘額
- [ ] 如有即將到期積分，顯示數量和到期日
- [ ] 積分頁面顯示完整交易記錄列表
- [ ] 交易記錄包含類型、描述、日期和積分變動
- [ ] 支援下拉刷新更新資料

---

### US-004: 累積積分

**用戶故事：**
> 作為 Baleno 會員，我希望能在店內結帳時快速出示我的會員 QR Code，讓職員掃描以累積積分。

**驗收標準：**
- [ ] 主頁有醒目的「會員 QR Code」按鈕
- [ ] 點擊後從底部滑出 QR Code 彈窗
- [ ] QR Code 清晰可見，包含會員 ID
- [ ] 顯示會員姓名和編號供職員核對
- [ ] 包含使用說明文字

---

### US-005: 兌換優惠券

**用戶故事：**
> 作為 Baleno 會員，我希望能使用積分兌換優惠券，在購物時獲得折扣。

**驗收標準：**
- [ ] 優惠券頁面顯示可兌換的優惠券列表
- [ ] 每張優惠券顯示所需積分和有效期
- [ ] 積分不足時兌換按鈕禁用或顯示提示
- [ ] 兌換前顯示確認對話框
- [ ] 兌換成功後顯示兌換碼和 QR Code
- [ ] 兌換後積分餘額即時更新

---

### US-006: 查看已兌換優惠券

**用戶故事：**
> 作為 Baleno 會員，我希望能查看我已兌換的優惠券和兌換碼，以便在購物時使用。

**驗收標準：**
- [ ] 可切換至「已兌換」頁籤
- [ ] 顯示已兌換優惠券列表
- [ ] 每張優惠券顯示兌換碼和 QR Code
- [ ] 顯示使用期限

---

### US-007: 切換語言

**用戶故事：**
> 作為用戶，我希望能切換 App 顯示語言，使用我熟悉的語言操作。

**驗收標準：**
- [ ] 設定頁面有語言選項
- [ ] 可選擇繁體中文、簡體中文或英文
- [ ] 選擇後界面立即更新為所選語言
- [ ] 語言偏好在 App 重啟後保持

---

### US-008: 登出

**用戶故事：**
> 作為會員，我希望能登出帳戶，以便切換至其他帳戶或保護我的隱私。

**驗收標準：**
- [ ] 設定頁面有登出按鈕
- [ ] 點擊後確認並執行登出
- [ ] 登出後返回主頁訪客模式
- [ ] 登出後清除本地儲存的認證資訊

---

## 5. 術語表

| 術語 | 定義 |
|------|------|
| 會員 | 已註冊 Baleno 會員計劃的用戶 |
| 積分 | 會員透過消費累積的獎勵點數，可用於兌換優惠券 |
| 優惠券 | 可在購物時使用的折扣憑證 |
| 兌換 | 使用積分換取優惠券的動作 |
| QR Code | 二維條碼，用於識別會員身份 |
| Token | 用於 API 認證的 JSON Web Token (JWT) |
| 訪客模式 | 未登入狀態，可瀏覽有限內容 |

---

## 6. API 端點參考

| 端點 | 方法 | 描述 |
|------|------|------|
| `/auth/login` | POST | 會員登入 |
| `/auth/register` | POST | 會員註冊 |
| `/auth/logout` | POST | 會員登出 |
| `/members/me` | GET | 取得會員資料 |
| `/members/me/points` | GET | 取得積分餘額 |
| `/members/me/transactions` | GET | 取得交易記錄 |
| `/members/me/coupons/available` | GET | 取得可用優惠券 |
| `/members/me/coupons/redeemed` | GET | 取得已兌換優惠券 |
| `/coupons/:id/redeem` | POST | 兌換優惠券 |
| `/members/push-token` | POST | 註冊推送 Token |

---

## 7. 附錄

### 7.1 品牌設計規範

| 項目 | 規範 |
|------|------|
| 主色調 | Baleno Red (#E31837) |
| 背景色 | Light Gray (#F3F4F6) |
| 文字色 | Dark Gray (#111827) |
| 次要文字 | Medium Gray (#6B7280) |
| 成功色 | Green (#22C55E) |
| 警告色 | Orange (#F97316) |
| 錯誤色 | Red (#EF4444) |

### 7.2 文件修訂記錄

| 版本 | 日期 | 修訂內容 | 作者 |
|------|------|----------|------|
| 1.0 | 2025-12-05 | 初版建立 | - |

---

*文件結束*
